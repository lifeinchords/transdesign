jQuery.event.special.frame||function(a,b){function c(a,b){function c(){d.frameCount++,a.call(d)}var d=this,e;this.frameDuration=b||25,this.frameCount=-1,this.start=function(){c(),e=setInterval(c,this.frameDuration)},this.stop=function(){clearInterval(e),e=null}}function d(){var b=a.event.special.frame.handler,c=a.Event("frame"),d=this.array,e=d.length;for(c.frameCount=this.frameCount;e--;)b.call(d[e],c)}var e;a.event.special.frame||(a.event.special.frame={setup:function(a){if(e)e.array.push(this);else{e=new c(d,a&&a.frameDuration),e.array=[this];var b=setTimeout(function(){e.start(),clearTimeout(b),b=null},0)}},teardown:function(){for(var a=e.array,c=a.length;c--;)if(a[c]===this){a.splice(c,1);break}a.length===0&&(e.stop(),e=b)},handler:function(){a.event.handle.apply(this,arguments)}})}(jQuery),function(a,b){function c(a){return this.lib[a]}function d(a){return typeof a=="boolean"?a:!!parseFloat(a)}function e(a,b){var c=[d(a.xparallax),d(a.yparallax)];this.ontarget=!1,this.decay=a.decay,this.pointer=b||[.5,.5],this.update=function(a,b){if(this.ontarget)this.pointer=a;else if((!c[0]||n(a[0]-this.pointer[0])<b[0])&&(!c[1]||n(a[1]-this.pointer[1])<b[1]))this.ontarget=!0,this.pointer=a;else{b=[];for(var d=2;d--;)c[d]&&(b[d]=a[d]+this.decay*(this.pointer[d]-a[d]));this.pointer=b}}}function f(b,c){var e=this,f=b instanceof a?b:a(b),g=[d(c.xparallax),d(c.yparallax)],h=0,i;this.pointer=[0,0],this.active=!1,this.activeOutside=c&&c.activeOutside||!1,this.update=function(a){var b=this.pos,c=this.size,d=[],e=2;if(h>0){h===2&&(h=0,i&&(a=i));for(;e--;)g[e]&&(d[e]=(a[e]-b[e])/c[e],d[e]=d[e]<0?0:d[e]>1?1:d[e]);this.active=!0,this.pointer=d}else this.active=!1},this.updateSize=function(){var a=f.width(),b=f.height();e.size=[a,b],e.threshold=[1/a,1/b]},this.updatePos=function(){var a=f.offset()||{left:0,top:0},b=parseInt(f.css("borderLeftWidth"))+parseInt(f.css("paddingLeft")),c=parseInt(f.css("borderTopWidth"))+parseInt(f.css("paddingTop"));e.pos=[a.left+b,a.top+c]},a(window).bind("resize",e.updateSize).bind("resize",e.updatePos),f.bind("mouseenter",function(){h=1}).bind("mouseleave",function(a){h=2,i=[a.pageX,a.pageY]}),this.updateSize(),this.updatePos()}function g(a,b){var c=[],d=[],e=[],f=[];this.update=function(b){for(var g=[],h,i,j=2,k={};j--;)d[j]&&(g[j]=d[j]*b[j]+e[j],c[j]?(h=f[j],i=g[j]*-1):(h=g[j]*100+"%",i=g[j]*this.size[j]*-1),j===0?(k.left=h,k.marginLeft=i):(k.top=h,k.marginTop=i));a.css(k)},this.setParallax=function(a,g,h,i){a=[a||b.xparallax,g||b.yparallax],h=[h||b.xorigin,i||b.yorigin];for(i=2;i--;)c[i]=l.px.test(a[i]),typeof h[i]=="string"&&(h[i]=l.percent.test(h[i])?parseFloat(h[i])/100:k[h[i]]||1),c[i]?(d[i]=parseInt(a[i]),e[i]=h[i]*(this.size[i]-d[i]),f[i]=h[i]*100+"%"):(d[i]=a[i]===!0?1:l.percent.test(a[i])?parseFloat(a[i])/100:a[i],e[i]=d[i]?h[i]*(1-d[i]):0)},this.getPointer=function(){for(var b=a.offsetParent(),f=a.position(),g=[],h=[],i=2;i--;)g[i]=c[i]?0:f[i===0?"left":"top"]/(b[i===0?"outerWidth":"outerHeight"]()-this.size[i]),h[i]=(g[i]-e[i])/d[i];return h},this.setSize=function(b,c){this.size=[b||a.outerWidth(),c||a.outerHeight()]},this.setSize(b.width,b.height),this.setParallax(b.xparallax,b.yparallax,b.xorigin,b.yorigin)}function h(b){var c=a(this),d=b.data,e=c.data(i),f=d.port,g=d.mouse,h=e.mouse;d.timeStamp!==b.timeStamp&&(d.timeStamp=b.timeStamp,f.update(o),(f.active||!g.ontarget)&&g.update(f.pointer,f.threshold)),h?(h.update(e.freeze?e.freeze.pointer:f.pointer,f.threshold),h.ontarget&&(delete e.mouse,e.freeze&&c.unbind(m).addClass(d.freezeClass)),g=h):g.ontarget&&!f.active&&c.unbind(m),e.layer.update(g.pointer)}var i="parallax",j={mouseport:"body",xparallax:!0,yparallax:!0,xorigin:.5,yorigin:.5,decay:.66,frameDuration:30,freezeClass:"freeze"},k={left:0,top:0,middle:.5,center:.5,right:1,bottom:1},l={px:/^\d+\s?px$/,percent:/^\d+\s?%$/},m="frame."+i,n=Math.abs,o=[0,0];c.lib=k,a.fn[i]=function(c){var d=a.extend({},a.fn[i].options,c),k=arguments,n=this;return d.mouseport instanceof a||(d.mouseport=a(d.mouseport)),d.port=new f(d.mouseport,d),d.mouse=new e(d),d.mouseport.bind("mouseenter",function(){d.mouse.ontarget=!1,n.each(function(){var b=a(this);b.data(i).freeze||b.bind(m,d,h)})}),n.bind("freeze",function(c){var f=a(this),g=f.data(i),j=g.mouse||g.freeze||d.mouse,k=l.percent.exec(c.x)?parseFloat(c.x.replace(/%$/,""))/100:c.x||j.pointer[0],n=l.percent.exec(c.y)?parseFloat(c.y.replace(/%$/,""))/100:c.y||j.pointer[1];c=c.decay,g.freeze={pointer:[k,n]},g.mouse=new e(d,j.pointer),c!==b&&(g.mouse.decay=c),f.bind(m,d,h)}).bind("unfreeze",function(c){var f=a(this),g=f.data(i);c=c.decay;var k;g.freeze&&(k=g.mouse?g.mouse.pointer:g.freeze.pointer,g.mouse=new e(d),g.mouse.pointer=k,c!==b&&(g.mouse.decay=c),delete g.freeze,f.removeClass(j.freezeClass).bind(m,d,h))}).each(function(b){var c=a(this);b=k[b+1]?a.extend({},d,k[b+1]):d;var f=new g(c,b);c.data(i,{layer:f,mouse:new e(b,f.getPointer())})})},a.fn[i].options=j,a(document).ready(function(){a(document).mousemove(function(a){o=[a.pageX,a.pageY]})})}(jQuery);